#!/bin/bash

export PATH="$HOME/.local/bin:/usr/local/cuda/bin/:$PATH"
export LD_LIBRARY_PATH="/usr/local/cuda/targets/x86_64-linux/lib"

# Make and CD
function mcd {
	mkdir $1 && cd $1
}

# PDF Grep Current
function pgc {
	pdfgrep -lr "$1" ./
}

function ins_apt_pkgs {
	ESSENTIALS_DIR="$( cd "$( dirname "${BASH_SOURCE[0]}" )" >/dev/null 2>&1 && pwd )"
	wget https://dl.google.com/linux/direct/google-chrome-stable_current_amd64.deb
	sudo dpkg -i google-chrome-stable_current_amd64.deb
	rm google-chrome-stable_current_amd64.deb
	sudo cp $ESSENTIALS_DIR/incognitrome.desktop /usr/share/applications
	curl https://packages.microsoft.com/keys/microsoft.asc | sudo apt-key add -
	sudo sh -c 'echo "deb [arch=amd64] https://packages.microsoft.com/repos/ms-teams stable main" > /etc/apt/sources.list.d/teams.list'
	sudo apt update
	sudo spt install teams
	sudo apt install -y uget biglybt xclip dconf-editor gnome-tweaks
}

function ins_snap_pkgs {
	snap install vlc
	snap install sublime-text
	snap install sublime-merge
}

function ins_pip_pkgs {
	pip3 install --upgrade pip
	pip3 install numpy scipy matplotlib spyder spyder-terminal spyder-notebook
}

# setup - Install Necessary Packages on the System
function stp {
	sudo apt update
	sudo apt upgrade -y
	sudo apt autoremove -y
	sudo apt install python3 git python3-pip
	ins_apt_pkgs &
	ins_snap_pkgs &
	ins_pip_pkgs &
}

# Generate ed25519 SSH-Key
# Might not work on Windows
function sk {
	TARGET=$1
	if [ "$1" = "gh" ]; then
		TARGET="github"
	elif [ "$1" = "gl" ]; then
		TARGET="gitlab"
	elif [ "$1" = "bb" ]; then
		TARGET="ol"
	elif [ "$1" = "bb" ]; then
		TARGET="overleaf"
	elif [ "$1" = "rp" ]; then
		TARGET="raspberrypi"
	fi
	OS=$(lsb_release -is)
	VER=$(lsb_release -cs)
	MODEL=$(cat /sys/devices/virtual/dmi/id/product_name)
	KEY_COMMENT="$MODEL - $OS $VER"
	KEY_PRV="$HOME/.ssh/ed25519_$TARGET"
	KEY_PUB="$KEY_PRV.pub"
	ssh-keygen -t ed25519 -f $KEY_PRV -C "$KEY_COMMENT"
	cat $KEY_PUB | xclip -selection clipboard
}